<html><head><title>Kichul's blog</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="chrome=1"/><meta name="description" content="Blog : Kichul&amp;#39;s blog"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes"/><link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css"/><link rel="stylesheet" type="text/css" media="screen" href="/assets/css/stylesheet.css"/></head><body></body><div id="header_wrap" class="outer"><header class="inner"><h1 id="project_title"><a href="/">Kichul&#39;s Blog</a></h1><h2 id="project_tagline">Fablous life!</h2><section id="menu"><ul class="nav nav-pills nav-justified"><li><a href="/">Home</a></li><li><a href="/pages/about/">About</a></li><li><a href="/blog/">Blog</a></li></ul></section></header></div><div id="main_content_wrap" class="outer"><section id="main_content" class="inner"><h1>자바스크립트로 OOP 구현하기</h1><p>이번 시간에는 모달창을 만들어 보겠습니다.</p>

<p>모달창은 보통 배경은 어둡게 되고, 팝업 레이어가 뜨는 형태로 많이 사용되고 있습니다. 
모달창을 만들기 위해서는 모달창에 어떤기능을 넣을지 기능정의를 해야 합니다.</p>

<ul>
  <li>보여주기</li>
  <li>감추기</li>
  <li>배경 어둡게 하는 레이어 생성</li>
  <li>가운데 보여주기</li>
</ul>

<p>간단하게 기능정의를 해봤는데, 이정도 기능을 가진 모달창을 어떻게 만드는지 알아보도록 하겠습니다.</p>

<p>먼저 HTML과 CSS를 정의를 합니다.</p>

<h1 id="html">HTML</h1>

<div class="highlight"><pre><code class="html"><span class="c">&lt;!-- 모달 창을 여는 버튼 --&gt;</span>
<span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>Open Modal<span class="nt">&lt;/button&gt;</span>
  
<span class="c">&lt;!-- 모달창 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;modal&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h3&gt;</span>Test Modal<span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;p&gt;</span>이 창은 모달창입니다.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;confirm_button&quot;</span><span class="nt">&gt;</span>확인<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;js_close&quot;</span><span class="nt">&gt;</span>닫기<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<h1 id="css">CSS</h1>

<div class="highlight"><pre><code class="css"><span class="nf">#modal</span> <span class="p">{</span><span class="k">display</span><span class="o">:</span><span class="k">none</span><span class="p">;</span><span class="k">background-color</span><span class="o">:</span><span class="m">#FFFFFF</span><span class="p">;</span><span class="k">position</span><span class="o">:</span><span class="k">absolute</span><span class="p">;</span><span class="k">top</span><span class="o">:</span><span class="m">300px</span><span class="p">;</span><span class="k">left</span><span class="o">:</span><span class="m">200px</span><span class="p">;</span><span class="k">padding</span><span class="o">:</span><span class="m">10px</span><span class="p">;</span><span class="k">border</span><span class="o">:</span><span class="m">2px</span> <span class="k">solid</span> <span class="m">#E2E2E2</span><span class="p">;</span><span class="n">z</span><span class="o">-</span><span class="n">Index</span><span class="o">:</span><span class="m">9999</span><span class="p">}</span></code></pre></div>

<p>버튼이 하나가 있고, 감춰진 레이어(모달창)가 있습니다. 버튼을 누르면 감춰진 레이어가 모달창으로 나타나게 되고, 확인 버튼이나 닫기 버튼을 누른다는 것이 예상되는 HTML 입니다.</p>

<h1 id="javascript">Javascript</h1>

<div class="highlight"><pre><code class="javascript"><span class="c">&lt;!--</span> <span class="err">스크립트</span> <span class="err">영역</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://code.jquery.com/jquery-1.6.1.min.js&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;/Example.Modal.js&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
<span class="c1">// 모달창 인스턴트 생성</span>
<span class="kd">var</span> <span class="nx">myModal</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Example</span><span class="p">.</span><span class="nx">Modal</span><span class="p">({</span>
    <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;modal&quot;</span> <span class="c1">// 모달창 아이디 지정</span>
<span class="p">});</span>
  
<span class="c1">// 모달 창 여는 버튼에 이벤트 걸기</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#button&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">myModal</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span> <span class="c1">// 모달창 보여주기</span>
<span class="p">});</span>
  
<span class="c1">// 모달 창 안에 있는 확인 버튼에 이벤트 걸기</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#confirm_button&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;나는 모달창이다.&quot;</span><span class="p">);</span>
    <span class="nx">myModal</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// 모달창 감추기</span>
<span class="p">});</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span></code></pre></div>

<p>자바스크립트를 살펴 보면, 3가지 액션을 합니다.</p>

<ul>
  <li>모달창 인스턴트 생성</li>
  <li>모달 창 여는 버튼에 이벤트 걸기</li>
  <li>모달 창 안에 있는 확인 버튼에 이벤트 걸기</li>
</ul>

<h1 id="examplemodaljs">Example.Modal.js</h1>

<div class="highlight"><pre><code class="javascript"><span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">Example</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="kd">var</span> <span class="nx">Example</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">){</span>
    <span class="nx">Example</span><span class="p">.</span><span class="nx">Modal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);</span>
<span class="p">}</span>
 
<span class="nx">Example</span><span class="p">.</span><span class="nx">Modal</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">initialize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
 
        <span class="c1">// 멤버변수 정의</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">hash</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getHashData</span><span class="p">(</span><span class="nx">hash</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 콘텐츠 레이어 너비</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 콘텐츠 레이어 높이</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">c_width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// body 화면 너비</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">c_height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// body 화면 높이</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s_width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// body 전체 너비</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s_height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// body 전체 높이</span>
 
        <span class="c1">// 콘텐츠 레이어 사이즈 구하기(멤버변수에 저장)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">getLayerSize</span><span class="p">();</span>
 
        <span class="c1">// body 사이즈 구하기(멤버변수에 저장)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">getBodySize</span><span class="p">();</span>
 
        <span class="c1">// 추가 엘리먼트 생성</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">addElement</span><span class="p">();</span>
 
        <span class="c1">// 마우스, 키 이벤트 정의</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">();</span>
    <span class="p">},</span>
 
    <span class="c1">// Hash 변수정의</span>
    <span class="nx">getHashData</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="nx">hash</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;modal&quot;</span><span class="p">;</span> <span class="c1">// 개체 아이디</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">hash</span><span class="p">.</span><span class="nx">is_slide</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="nx">hash</span><span class="p">.</span><span class="nx">is_slide</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 슬라이딩 여부</span>
 
        <span class="k">return</span> <span class="nx">hash</span><span class="p">;</span>
    <span class="p">},</span>
 
    <span class="c1">// 추가 엘리먼트 생성 - JS에서 추가해 주어야 할 HTML 작성합니다.</span>
    <span class="nx">addElement</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 배경 레이어 HTML 받아오기</span>
        <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">addOverlay</span><span class="p">();</span>
 
        <span class="c1">// 배경레이어 HTML을 콘텐츠레이어 앞에 추가</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">before</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
    <span class="p">},</span>
 
    <span class="c1">// 마우스, 키 이벤트 정의</span>
    <span class="nx">addEvent</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
 
        <span class="c1">// 닫기 버튼 클릭 이벤트 정의</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="o">+</span><span class="s2">&quot; .js_close&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// 모달창 감추기(여기서 obj는 Example.Modal 인스턴트 자체를 의미)</span>
            <span class="nx">obj</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">},</span>  
 
    <span class="cm">/* 주요기능 */</span>
 
    <span class="c1">// 모달창 보여주기</span>
    <span class="nx">show</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 가운데로 이동</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">moveCenter</span><span class="p">();</span>
 
        <span class="c1">// 배경레이어 적용</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">applyOverlay</span><span class="p">();</span>
 
        <span class="c1">// 콘텐츠 레이어 보여주기</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span> 
 
        <span class="c1">// 배경 레이어 보여주기</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="o">+</span><span class="s2">&quot;_overlay&quot;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">},</span>
 
    <span class="c1">// 모달창 감추기</span>
    <span class="nx">hide</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// 콘텐츠 레이어 감추기</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="o">+</span><span class="s2">&quot;_overlay&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span> <span class="c1">// 배경 레이어 감추기</span>
    <span class="p">},</span>  
 
    <span class="cm">/* 부가 기능 */</span>
 
    <span class="c1">// 콘텐츠 레이어의 너비와 높이를 구해서 멤버변수에 정의</span>
    <span class="nx">getLayerSize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">outerWidth</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">outerHeight</span><span class="p">();</span>
    <span class="p">},</span>
 
    <span class="c1">// body 사이즈 구해서 멤버변수에 정의</span>
    <span class="nx">getBodySize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">c_width</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">c_height</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s_width</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">s_height</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">;</span>
    <span class="p">},</span>
 
    <span class="c1">// 배경 레이어 HTML 생성</span>
    <span class="nx">addOverlay</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s2">&quot;</span>
<span class="s2"> </span>
<span class="s2">&quot;</span><span class="p">;</span>
 
        <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
    <span class="p">},</span>
 
    <span class="c1">// 콘텐츠 레이어를 가운데로 이동(top, left 조절해 줌)</span>
    <span class="nx">moveCenter</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// left 좌표 구하기</span>
        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">c_width</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
 
        <span class="c1">// top 좌표 구하기</span>
        <span class="kd">var</span> <span class="nx">res_height</span><span class="p">;</span> <span class="c1">// 콘텐츠를 화면상의 가운데로 두었을 때의 높이</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">c_height</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 화면 높이 &lt; 콘텐츠 레이어 높이</span>
            <span class="nx">res_height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// 화면 높기 &gt;= 콘텐츠 레이어 높이</span>
            <span class="nx">res_height</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">c_height</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// 차이를 빼서 2로 나눔. 그리고 내림.</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="nx">res_height</span><span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">();</span> <span class="c1">// 화면상의 높이에 스크롤높이를 더한 절대좌표를 top에 저장</span>
 
        <span class="c1">// css의 top,left 조정</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">,</span><span class="nx">top</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">,</span><span class="nx">left</span><span class="p">);</span>
    <span class="p">},</span>
 
    <span class="c1">// 배경 레이어 적용</span>
    <span class="nx">applyOverlay</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// body 사이즈 구하기(멤버변수에 저장)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">getBodySize</span><span class="p">();</span>
 
        <span class="c1">// 배경 레이어에 width, height css 값 조정</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="o">+</span><span class="s2">&quot;_overlay&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">s_width</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">id</span><span class="o">+</span><span class="s2">&quot;_overlay&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">s_height</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span></code></pre></div>

<p>소스가 긴데 크게 보면(메소드 단위) 간단한 소스입니다. 아래 화면을 보면 이클립스가 있고, 우측에 아웃라인 뷰라고 해서, JS 클래스의 구조를 볼 수 있는 편리한 뷰가 생깁니다. 이클립스의 장점이죠.</p>

<p><img src="http://storage.kichul.co.kr/data_public/20120702/%EC%9D%B4%ED%81%B4%EB%A6%BD%EC%8A%A4-example-modal-%EC%98%88%EC%A0%9C.gif" alt="screenshot" /></p>

<p>어쨌든 이 메소드들이 어떤 일을 하는지 알아보도록 하겠습니다.</p>

<h2 id="initialize">INITIALIZE</h2>
<p>인스턴트를 생성했을 때 초기화를 시켜주는 생성자입니다. 인스턴트 생성되었을 때 하는 모든일은 여기서 정의하게 됩니다. getLayerSize(), getBodySize(), addElement(), addEvent() 메소드를 실행시켜주게 됩니다. 이 메소드에서는 아래부분에서 알아보도록 하겠습니다.</p>

<h2 id="gethashdata">GETHASHDATA</h2>
<p>다음과 같은 부분이 있는데, getHashData 메소드를 실행시키고 그 반환값을 멤버변수인 this.hash에 집어넣는다는 의미입니다. 이 메소드는 자바스크립트 인스턴트의 기본(default)값을 정의하는 역할을 합니다.</p>

<p><code>
this.hash = this.getHashData(hash);
</code></p>

<h2 id="addelement">ADDELEMENT</h2>
<p>추가 엘리먼트를 생성합니다. 모달창 div 나 버튼 같은 요소들은 Javascript로 처리되기 전에 있어도 상관 없지만, 백그라운드 레이어 같은 경우는 모달창이 뜰때만 필요한 부분일 수도 있기 때문에 동적으로 생성되는게 더 효율적이라고 생각이 됩니다.</p>

<h2 id="addevent">ADDEVENT</h2>
<p>모듈에 관련된 요소들에 이벤트를 걸어줍니다. 여기서는 모달창 모듈의 닫기 버튼에 클릭이벤트를 걸었습니다.</p>

<h2 id="show">SHOW</h2>
<p>가장 중요한 보여주기 기능입니다. 콘텐츠 레이어를 가운데로 옮기고, 배경레이어 사이즈 조정 후 콘텐츠와 배경레이어를 보여줍니다.</p>

<h2 id="hide">HIDE</h2>
<p>감추는 기능입니다. 모달창과 배경레이어를 감추는 내용입니다.</p>

<h2 id="getlayersize">GETLAYERSIZE</h2>
<p>콘텐츠 레이어의 너비와 높이를 구하는 메소드입니다. 가운데 정렬하기 위해서 필요한 수치이기 때문에 이 메소드를 따로 두게 되었습니다.</p>

<h2 id="getbodysize">GETBODYSIZE</h2>
<p>body의 너비와 높이를 구하는 메소드입니다. 이 메소드 역시 가운데 정렬을 하기 위해 필요합니다.</p>

<h2 id="addoverlay">ADDOVERLAY</h2>
<p>단순히 배경 레이어를 생성하고, css를 in-line으로 정의되어서 독립적으로 쓸 수 있습니다.</p>

<h2 id="movecenter">MOVECENTER</h2>
<p>위 메소드를 실행시켜 구한 수치들을 이용해서 계산을 하는 메소드입니다. 마지막에는 css의 top, left 의 수치를 변화시켜서 가운데 정렬을 하게됩니다.</p>

<h2 id="applyoverlay">APPLYOVERLAY</h2>
<p>배경 레이어의 사이즈를 body의 사이즈에 따라서 변화를 시킵니다. 이 메소드는 resize를 할 때 body의 사이즈가 달라졌을 경우 실행시키도록 하면 항상 body를 덮는 배경레이어를 만들 수 있습니다.</p>
<div class="related"><h3>Related Posts</h3><table class="post-list"><tr><td><a href="/javascript/2013/08/05/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%20OOP%20%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0/">자바스크립트로 OOP 구현하기</a></td><td>05 Aug 2013</td></tr><tr><td><a href="/javascript/2013/08/05/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%20%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD%20%EA%B5%AC%EC%B6%95%EA%B3%BC%20%EB%94%94%EB%B2%84%EA%B9%85/">자바스크립트 개발환경 구축과 디버깅</a></td><td>05 Aug 2013</td></tr><tr><td><a href="/javascript/2013/08/05/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%20DOM/">자바스크립트 DOM</a></td><td>05 Aug 2013</td></tr>					</table></div></section></div><div id="footer_wrap" class="outer"><footer class="inner"><p class="copyright">Blog maintained by <a href="mailto:jung@kichul.co.kr">jung@kichul.co.kr</a></p></footer></div></html>